"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const devkit_1 = require("@nrwl/devkit");
const workspace_1 = require("@nrwl/workspace");
const utils_1 = require("../../utils");
let name;
let npmPackageName;
function default_1(tree, schema) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        name = workspace_1.stringUtils.dasherize(schema.name.toLowerCase());
        utils_1.prerun(tree);
        addAngularFiles(tree);
        console.log(`Angular support added for "${npmPackageName}". Continue developing the Angular support in the packages/${name}/angular folder.`);
    });
}
exports.default = default_1;
function addAngularFiles(tree) {
    console.log(`Adding Angular support to ${name}...`);
    const packageJson = devkit_1.readJson(tree, `packages/${name}/package.json`);
    npmPackageName = packageJson.name;
    devkit_1.generateFiles(tree, devkit_1.joinPathFragments(__dirname, 'files'), `./packages/${name}/angular`, { name, npmPackageName, npmScope: utils_1.getNpmScope(), nxNpmScope: utils_1.getNxNpmScope(), stringUtils: workspace_1.stringUtils, tmpl: '', dot: '.' });
}
//# sourceMappingURL=index.js.map