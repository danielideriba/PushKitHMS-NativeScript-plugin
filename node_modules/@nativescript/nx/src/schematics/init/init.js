"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addDependencies = void 0;
const schematics_1 = require("@angular-devkit/schematics");
const workspace_1 = require("@nrwl/workspace");
const versions_1 = require("../../utils/versions");
function default_1(schema) {
    return schematics_1.chain([setWorkspaceDefaults(), workspace_1.addPackageWithInit('@nrwl/jest'), addDependencies()]);
}
exports.default = default_1;
function addDependencies() {
    return workspace_1.addDepsToPackageJson({
        '@nativescript/core': versions_1.nsCoreVersion,
        '@nativescript/theme': versions_1.nsThemeVersion,
    }, {
        '@nativescript/types': versions_1.nsTypesVersion,
    });
}
exports.addDependencies = addDependencies;
function setWorkspaceDefaults() {
    return workspace_1.updateWorkspace((workspace) => {
        workspace.extensions.cli = workspace.extensions.cli || {};
        const defaultCollection = workspace.extensions.cli && workspace.extensions.cli.defaultCollection;
        if (!defaultCollection) {
            workspace.extensions.cli.defaultCollection = '@nativescript/nx';
        }
    });
}
//# sourceMappingURL=init.js.map