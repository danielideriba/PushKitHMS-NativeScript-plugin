import { ContentView, ProxyViewContainer, GridLayout, Application } from '@nativescript/core';
export class AppHostView extends ContentView {
    constructor(backgroundColor) {
        super();
        this.timeout = -1;
        this.backgroundColor = backgroundColor;
    }
    get ngAppRoot() {
        return this._ngAppRoot;
    }
    set ngAppRoot(value) {
        this._ngAppRoot = value;
    }
    //@ts-ignore
    get content() {
        return this._content;
    }
    set content(value) {
        if (this._content) {
            this._content.parentNode = undefined;
        }
        this._content = value;
        if (value) {
            this._content.parentNode = this;
        }
        this.ngAppRoot = value;
        if (this._content instanceof ProxyViewContainer) {
            const grid = new GridLayout();
            grid.backgroundColor = this.backgroundColor;
            grid.addChild(this._content);
            this.ngAppRoot = grid;
        }
        if (this.ngAppRoot) {
            // maybe use this approach
            // this.scheduleRootChange();
        }
    }
    scheduleRootChange() {
        if (this.timeout === -1) {
            this.timeout = setTimeout(() => {
                //console.log(this.ngAppRoot);
                Application.resetRootView({
                    create: () => this.content
                });
                this.timeout = -1;
            }, 0);
        }
    }
}
export class AppHostAsyncView extends GridLayout {
    constructor(backgroundColor) {
        super();
        this.backgroundColor = backgroundColor;
    }
    get ngAppRoot() {
        return this;
    }
    set ngAppRoot(value) {
        // ignored
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWhvc3Qtdmlldy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvYXBwLWhvc3Qtdmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFRLGtCQUFrQixFQUFFLFVBQVUsRUFBUyxXQUFXLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUzRyxNQUFNLE9BQU8sV0FBWSxTQUFRLFdBQVc7SUFLM0MsWUFBWSxlQUFzQjtRQUNqQyxLQUFLLEVBQUUsQ0FBQztRQUhELFlBQU8sR0FBUSxDQUFDLENBQUMsQ0FBQztRQUl6QixJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztJQUN4QyxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1osT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFNBQVMsQ0FBQyxLQUFXO1FBQ3hCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFDRCxZQUFZO0lBQ2YsSUFBSSxPQUFPO1FBQ1YsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxJQUFJLE9BQU8sQ0FBQyxLQUFXO1FBQ3RCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDckM7UUFFRCxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUV0QixJQUFJLEtBQUssRUFBRTtZQUNWLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUNoQztRQUVELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXZCLElBQUksSUFBSSxDQUFDLFFBQVEsWUFBWSxrQkFBa0IsRUFBRTtZQUNoRCxNQUFNLElBQUksR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUM1QyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUN0QjtRQUNELElBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQiwwQkFBMEI7WUFDMUIsNkJBQTZCO1NBQzdCO0lBQ0YsQ0FBQztJQUVELGtCQUFrQjtRQUNqQixJQUFHLElBQUksQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUM5Qiw4QkFBOEI7Z0JBQzlCLFdBQVcsQ0FBQyxhQUFhLENBQUM7b0JBQ3pCLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTztpQkFDMUIsQ0FBQyxDQUFDO2dCQUNILElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDbkIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ047SUFDRixDQUFDO0NBQ0Q7QUFFRCxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsVUFBVTtJQUMvQyxZQUFZLGVBQXNCO1FBQ2pDLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7SUFDeEMsQ0FBQztJQUVELElBQUksU0FBUztRQUNaLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUVELElBQUksU0FBUyxDQUFDLEtBQVc7UUFDeEIsVUFBVTtJQUNYLENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRlbnRWaWV3LCBWaWV3LCBQcm94eVZpZXdDb250YWluZXIsIEdyaWRMYXlvdXQsIENvbG9yLCBBcHBsaWNhdGlvbiB9IGZyb20gJ0BuYXRpdmVzY3JpcHQvY29yZSc7XG5cbmV4cG9ydCBjbGFzcyBBcHBIb3N0VmlldyBleHRlbmRzIENvbnRlbnRWaWV3IHtcblx0cHJpdmF0ZSBfbmdBcHBSb290OiBWaWV3O1xuXHRwcml2YXRlIF9jb250ZW50OiBWaWV3O1xuXHRwcml2YXRlIHRpbWVvdXQ6IGFueSA9IC0xO1xuXG5cdGNvbnN0cnVjdG9yKGJhY2tncm91bmRDb2xvcjogQ29sb3IpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuXHR9XG5cblx0Z2V0IG5nQXBwUm9vdCgpOiBWaWV3IHtcblx0XHRyZXR1cm4gdGhpcy5fbmdBcHBSb290O1xuXHR9XG5cblx0c2V0IG5nQXBwUm9vdCh2YWx1ZTogVmlldykge1xuXHRcdHRoaXMuX25nQXBwUm9vdCA9IHZhbHVlO1xuICAgIH1cbiAgICAvL0B0cy1pZ25vcmVcblx0Z2V0IGNvbnRlbnQoKTogVmlldyB7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRlbnQ7XG5cdH1cblxuXHRzZXQgY29udGVudCh2YWx1ZTogVmlldykge1xuXHRcdGlmICh0aGlzLl9jb250ZW50KSB7XG5cdFx0XHR0aGlzLl9jb250ZW50LnBhcmVudE5vZGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0dGhpcy5fY29udGVudCA9IHZhbHVlO1xuXG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHR0aGlzLl9jb250ZW50LnBhcmVudE5vZGUgPSB0aGlzO1xuXHRcdH1cblxuXHRcdHRoaXMubmdBcHBSb290ID0gdmFsdWU7XG5cblx0XHRpZiAodGhpcy5fY29udGVudCBpbnN0YW5jZW9mIFByb3h5Vmlld0NvbnRhaW5lcikge1xuXHRcdFx0Y29uc3QgZ3JpZCA9IG5ldyBHcmlkTGF5b3V0KCk7XG5cdFx0XHRncmlkLmJhY2tncm91bmRDb2xvciA9IHRoaXMuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0Z3JpZC5hZGRDaGlsZCh0aGlzLl9jb250ZW50KTtcblx0XHRcdHRoaXMubmdBcHBSb290ID0gZ3JpZDtcblx0XHR9XG5cdFx0aWYodGhpcy5uZ0FwcFJvb3QpIHtcblx0XHRcdC8vIG1heWJlIHVzZSB0aGlzIGFwcHJvYWNoXG5cdFx0XHQvLyB0aGlzLnNjaGVkdWxlUm9vdENoYW5nZSgpO1xuXHRcdH1cblx0fVxuXG5cdHNjaGVkdWxlUm9vdENoYW5nZSgpIHtcblx0XHRpZih0aGlzLnRpbWVvdXQgPT09IC0xKSB7XG5cdFx0XHR0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyh0aGlzLm5nQXBwUm9vdCk7XG5cdFx0XHRcdEFwcGxpY2F0aW9uLnJlc2V0Um9vdFZpZXcoe1xuXHRcdFx0XHRcdGNyZWF0ZTogKCkgPT4gdGhpcy5jb250ZW50XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLnRpbWVvdXQgPSAtMTtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgQXBwSG9zdEFzeW5jVmlldyBleHRlbmRzIEdyaWRMYXlvdXQge1xuXHRjb25zdHJ1Y3RvcihiYWNrZ3JvdW5kQ29sb3I6IENvbG9yKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjtcblx0fVxuXG5cdGdldCBuZ0FwcFJvb3QoKTogVmlldyB7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRzZXQgbmdBcHBSb290KHZhbHVlOiBWaWV3KSB7XG5cdFx0Ly8gaWdub3JlZFxuXHR9XG59XG4iXX0=